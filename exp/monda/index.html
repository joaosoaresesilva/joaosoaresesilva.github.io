<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Simulador de Inundação - Coimbra</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map { height: 500px; width: 100%; border-radius: 8px; }
        .controls { padding: 20px; background: #f4f4f4; margin-bottom: 10px; border-radius: 8px; }
        .status { font-weight: bold; color: #d9534f; }
    </style>
</head>
<body>

<div class="controls">
    <h2>Simulador de Cheias - Rio Mondego (Coimbra)</h2>
    <label for="waterLevel">Nível do Rio (metros): </label>
    <input type="number" id="waterLevel" value="15" step="0.5">
    <button onclick="updateSimulation()">Simular</button>
    <p id="alertMsg" class="status"></p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Inicializar o mapa focado em Coimbra
    const map = L.map('map').setView([40.2085, -8.4285], 14);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Definição da zona da Baixa de Coimbra (coordenadas aproximadas)
    const baixaPolygon = L.polygon([
        [40.2115, -8.4315],
        [40.2115, -8.4285],
        [40.2085, -8.4285],
        [40.2085, -8.4315]
    ], {color: 'blue', fillOpacity: 0}).addTo(map);

    // Definição da zona do Parque Verde (inunda mais cedo)
    const parqueVerde = L.polygon([
        [40.2055, -8.4290],
        [40.2055, -8.4260],
        [40.2030, -8.4260],
        [40.2030, -8.4290]
    ], {color: 'cyan', fillOpacity: 0}).addTo(map);

    function updateSimulation() {
        const level = parseFloat(document.getElementById('waterLevel').value);
        const msg = document.getElementById('alertMsg');

        // Lógica de simulação baseada nos teus inputs
        if (level >= 20) {
            baixaPolygon.setStyle({fillOpacity: 0.6, color: 'red'});
            msg.innerText = "ALERTA: Inundação total da Baixa de Coimbra!";
        } else if (level >= 19) {
            baixaPolygon.setStyle({fillOpacity: 0.3, color: 'orange'});
            msg.innerText = "AVISO: Início de inundação na Baixa (zonas ribeirinhas).";
        } else if (level >= 17) {
            parqueVerde.setStyle({fillOpacity: 0.5, color: 'blue'});
            msg.innerText = "O Parque Verde já se encontra submerso.";
        } else {
            baixaPolygon.setStyle({fillOpacity: 0});
            parqueVerde.setStyle({fillOpacity: 0});
            msg.innerText = "Nível normal ou controlado.";
        }
    }
</script>

</body>
</html>
